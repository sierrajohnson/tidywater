<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to tidywater: Basic functions • tidywater</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to tidywater: Basic functions">
<meta name="description" content="This vignette will detail how to use the tidywater base functions for basic water quality analysis.">
<meta property="og:description" content="This vignette will detail how to use the tidywater base functions for basic water quality analysis.">
<meta property="og:image" content="https://BrownandCaldwell-Public.github.io/tidywater/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidywater</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.10.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/tidywater.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/coeff_fitting_chemdose_dbp.html">Fitting and using custom coefficients in chemdose_dbp</a></li>
    <li><a class="dropdown-item" href="../articles/help_functions_blend_waters.html">Blending Multiple Waters</a></li>
    <li><a class="dropdown-item" href="../articles/help_functions_chemdose_ph.html">Helper Functions &amp; Dose Chemicals</a></li>
    <li><a class="dropdown-item" href="../articles/intro.html">Introduction to tidywater: Basic functions</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/BrownandCaldwell-Public/tidywater/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to tidywater: Basic functions</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/BrownandCaldwell-Public/tidywater/blob/main/vignettes/intro.Rmd" class="external-link"><code>vignettes/intro.Rmd</code></a></small>
      <div class="d-none name"><code>intro.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<p>The tidywater package allows you to quickly model complex water
quality and treatment processes using the R programming language. First,
install the tidywater package and load the library.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/BrownandCaldwell-Public/tidywater" class="external-link">tidywater</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="defining-a-water">Defining a water<a class="anchor" aria-label="anchor" href="#defining-a-water"></a>
</h2>
<p>The first step for any modelling project using tidywater is to define
your starting water quality. This can be done using the
<code>define_water</code> function. This function allows you to input
everything you know about your water (pH, alkalinity, temperature,
etc.). It also standardizes units for subsequent modelling steps,
calculates the carbonate balance from the alkalinity and pH (if
provided), and estimates the ionic strength of the water from your
inputs. The function then takes all this information and creates a
unique object of class “water” (for more details, see
<a href="https://adv-r.hadley.nz/s4.html" class="external-link"> R’s S4 class</a>).</p>
<p>The “water” class is the building block of tidywater and allows you
to keep track of all the changes in your water through various water
treatment processes in a tidy way. Think of the “water” class as a
snapshot of everything that is known about a water at each step in a
modelling process.</p>
<p>Why does tidywater depend on this special class instead of just using
a data frame? The water class is a good way to standardize inputs and
set up a data structure that would reduce user error. Funneling users
through <code>define_water</code> reduces naming errors in downstream
functions. It also ensures that all slots have the proper data class.
For example, <code>ph</code> must always be a number, and
<code>treatment</code> is always a character.</p>
<p>To start, let’s create a blank water class and call it
<code>empty_water.</code></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">empty_water</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_water.html">define_water</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in define_water(): Missing value for pH. Carbonate balance will not be</span></span>
<span><span class="co">#&gt; calculated.</span></span>
<span><span class="co">#&gt; Warning in define_water(): Missing value for alkalinity. Carbonate balance will</span></span>
<span><span class="co">#&gt; not be calculated.</span></span>
<span><span class="co">#&gt; Warning in define_water(): Major ions missing and neither TDS or conductivity</span></span>
<span><span class="co">#&gt; entered. Ideal conditions will be assumed. Ionic strength will be set to NA and</span></span>
<span><span class="co">#&gt; activity coefficients in future calculations will be set to 1.</span></span></code></pre></div>
<p>Notice that several warnings are generated about the water class.
<code>define_water</code> will return warnings noting the assumptions
and limitations of the water class depending on how much information you
provided. For example, since we did not provide any information about
the water’s pH or alkalinity, the carbonate balance cannot be
calculated. Similarly, since we did not provide any information about
major ions in the water, information about the water’s hardness and
ionic strength are missing.</p>
<p>Even so, we successfully created our first water class! You can view
the first few slots that a water class can contain by printing
<code>empty_water</code>. But there are slots for general parameters,
carbon content, corrosivity indicators, major cations and anions, and
disinfection byproducts (DBPs). Different functions within tidywater
will allow you to model all these parameters and more.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">empty_water</span><span class="op">)</span></span>
<span><span class="co">#&gt; pH (unitless):  NA </span></span>
<span><span class="co">#&gt; Temperature (deg C):  25 </span></span>
<span><span class="co">#&gt; Alkalinity (mg/L CaCO3):  NA </span></span>
<span><span class="co">#&gt; Use summary functions or slot names to view other parameters.</span></span></code></pre></div>
<p>So let’s add some things to this water that we already know. Let’s
say we know pH, alkalinity, temperature, and the sodium concentration.
We can define each of these parameters as arguments in
<code>define_water</code>, which accepts pH (unitless), alkalinity in
units of mg/L CaCO3, temperature in degrees C, and ions in mg/L (with
the exception of bromide and manganese, reported as ug/L). The function
also refers to all chemical compounds by their chemical symbol or
formula. Let’s call the new water class <code>my_water.</code></p>
<p>Notice that the slots for <code>ph</code>, <code>alk</code>,
<code>temp</code>, <code>na</code>, and <code>ca</code> are now
populated, but we’ll need to use slot names to see most of the
information. The ions slots (<code>na</code>, <code>ca</code>) are
output in units of mol/L (M). We can also see that
<code>define_water</code> automatically calculated the amount of
carbonate (<code>co3</code>) and bicarbonate (<code>hco3</code>) in the
water based on the alkalinity and pH.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_water</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_water.html">define_water</a></span><span class="op">(</span>ph <span class="op">=</span> <span class="fl">7.5</span>, alk <span class="op">=</span> <span class="fl">100</span>, temp <span class="op">=</span> <span class="fl">20</span>, na <span class="op">=</span> <span class="fl">50</span>, ca <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span>
<span><span class="va">my_water</span></span>
<span><span class="co">#&gt; pH (unitless):  7.5 </span></span>
<span><span class="co">#&gt; Temperature (deg C):  20 </span></span>
<span><span class="co">#&gt; Alkalinity (mg/L CaCO3):  100 </span></span>
<span><span class="co">#&gt; Use summary functions or slot names to view other parameters.</span></span>
<span><span class="va">my_water</span><span class="op">@</span><span class="va">na</span></span>
<span><span class="co">#&gt; [1] 0.00217488</span></span>
<span><span class="va">my_water</span><span class="op">@</span><span class="va">hco3</span></span>
<span><span class="co">#&gt; [1] 0.001992775</span></span></code></pre></div>
<p>You can easily summarize your water quality using the
<code>summarize_wq</code> function, which takes a water class object and
exports an easy-to-read table of the water quality into the console.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/summarize_wq.html">summarize_wq</a></span><span class="op">(</span><span class="va">my_water</span><span class="op">)</span></span></code></pre></div>
<table class="table kable_wrapper"><tbody><tr>
<td>
<table class="table">
<thead><tr class="header">
<th align="left">General water quality parameters</th>
<th align="right">Result</th>
<th align="left">Units</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">pH</td>
<td align="right">7.5000</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">Temp</td>
<td align="right">20.0000</td>
<td align="left">deg C</td>
</tr>
<tr class="odd">
<td align="left">Alkalinity</td>
<td align="right">100.0000</td>
<td align="left">mg/L as CaCO3</td>
</tr>
<tr class="even">
<td align="left">Total_Hardness</td>
<td align="right">192.1002</td>
<td align="left">mg/L as CaCO3</td>
</tr>
<tr class="odd">
<td align="left">TDS</td>
<td align="right">NA</td>
<td align="left">mg/L</td>
</tr>
<tr class="even">
<td align="left">Conductivity</td>
<td align="right">NA</td>
<td align="left">uS/cm</td>
</tr>
<tr class="odd">
<td align="left">TOC</td>
<td align="right">NA</td>
<td align="left">mg/L</td>
</tr>
</tbody>
</table>
</td>
</tr></tbody></table>
<p>This is a great way to get started with <code>tidywater</code> for
users who only need to model a single water quality. If you have a large
data set with multiple water qualities that you want to model, though,
this might sound tedious. It wouldn’t be possible to manually enter your
pH, alkalinity, temperature, etc. for, let’s say, 5,000 rows. Instead,
<code>tidywater</code> has helper functions to generate many water
classes simultaneously from an imported data set. See the
<code>help_functions_blend</code> vignette for large data processing
(paste this in the console:
<code>vignette("help_functions_blend", package = "tidywater")</code>).</p>
</div>
<div class="section level2">
<h2 id="plotting-and-balancing-ions">Plotting and balancing ions<a class="anchor" aria-label="anchor" href="#plotting-and-balancing-ions"></a>
</h2>
<p>Back to our single use case, you’ll notice one of the warnings alerts
the user to missing cations and/or anions, and that you should use
<code>balance_ions</code> to correct this. This is based on the
electroneutrality principle which states that the charges of all the
cations and anions in a water should add up to 0. If your water is
missing any ions, it is likely that it isn’t balanced. This could cause
the results of your model to be off.</p>
<p>To check, you can use the <code>plot_ions</code> function on our
<code>water</code> object to see what the current ion balance looks
like. You can see that cation and anion bars are not equal, so this is
not very realistic.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_ions.html">plot_ions</a></span><span class="op">(</span><span class="va">my_water</span><span class="op">)</span></span></code></pre></div>
<p><img src="intro_files/figure-html/unnamed-chunk-6-1.png" class="r-plt" width="672"></p>
<p>To correct this, the <code>balance_ions</code> function automatically
adds in sodium, potassium, chloride, or sulfate until anions + cations =
0. Let’s see what happens to the ion plot when we use
<code>balance_ions</code> to estimate the missing ion
concentrations.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">balanced_water</span> <span class="op">&lt;-</span> <span class="va">my_water</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/balance_ions.html">balance_ions</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/plot_ions.html">plot_ions</a></span><span class="op">(</span><span class="va">balanced_water</span><span class="op">)</span></span></code></pre></div>
<p><img src="intro_files/figure-html/unnamed-chunk-7-1.png" class="r-plt" width="672"></p>
<p>Great! <code>balance_ions</code> added chloride to
<code>my_water</code> so it is now electrically neutral. To see how much
chloride was added, you can use the “@” symbol with a <code>water</code>
class object to access the slot you want, in this case, chloride</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_water</span><span class="op">@</span><span class="va">cl</span> <span class="co"># We did not input any chloride in the original water</span></span>
<span><span class="co">#&gt; [1] NA</span></span>
<span></span>
<span><span class="va">balanced_water</span><span class="op">@</span><span class="va">cl</span> <span class="co"># The balanced water now contains chloride</span></span>
<span><span class="co">#&gt; [1] 0.004015285</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="converting-units">Converting units<a class="anchor" aria-label="anchor" href="#converting-units"></a>
</h2>
<p>The chloride units are in M. What if you want to know what that is in
mg/L? There are two ways to do this in tidywater. The easiest way is to
use the <code>summarize_wq</code> function shown above, which converts
the ion concentrations back to mg/L.</p>
<p>Another option is to use the <code>convert_units</code> function,
which allows you to specify the chemical and the starting and ending
units. In this case, we want to convert the chloride concentration in
<code>balanced_water</code> from M to mg/L.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/convert_units.html">convert_units</a></span><span class="op">(</span>value <span class="op">=</span> <span class="va">balanced_water</span><span class="op">@</span><span class="va">cl</span>, formula <span class="op">=</span> <span class="st">"cl"</span>, startunit <span class="op">=</span> <span class="st">"M"</span>, endunit <span class="op">=</span> <span class="st">"mg/L"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 142.3539</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="modelling-assumptions">Modelling assumptions<a class="anchor" aria-label="anchor" href="#modelling-assumptions"></a>
</h2>
<div class="section level3">
<h3 id="ionic-strength">Ionic strength<a class="anchor" aria-label="anchor" href="#ionic-strength"></a>
</h3>
<p>When possible, <code>define_water</code> will calculate ionic
strength of the water, either based on TDS, conductivity, or the ions
provided in the water. Most functions will work fine if you don’t know
the ionic strength, but especially when it comes to pH chemistry, it’s
good to include all the information you have. Note that in our original
water, we didn’t provide enough ions for the ionic strength to be
determined. We can remedy this in a few ways.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The ionic strength slot was NA in the original water because we did not</span></span>
<span><span class="co"># provide enough information to calculate it</span></span>
<span><span class="va">my_water</span><span class="op">@</span><span class="va">is</span></span>
<span><span class="co">#&gt; [1] NA</span></span>
<span></span>
<span><span class="co"># Input TDS or conductivity</span></span>
<span><span class="va">new_water1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_water.html">define_water</a></span><span class="op">(</span>ph <span class="op">=</span> <span class="fl">7.5</span>, alk <span class="op">=</span> <span class="fl">100</span>, temp <span class="op">=</span> <span class="fl">20</span>, na <span class="op">=</span> <span class="fl">50</span>, ca <span class="op">=</span> <span class="fl">50</span>, tds <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in define_water(ph = 7.5, alk = 100, temp = 20, na = 50, ca = 50, :</span></span>
<span><span class="co">#&gt; Missing values for magnesium and total hardness but calcium supplied. Default</span></span>
<span><span class="co">#&gt; ratio of 65% Ca2+ and 35% Mg2+ will be used.</span></span>
<span><span class="va">new_water2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_water.html">define_water</a></span><span class="op">(</span>ph <span class="op">=</span> <span class="fl">7.5</span>, alk <span class="op">=</span> <span class="fl">100</span>, temp <span class="op">=</span> <span class="fl">20</span>, na <span class="op">=</span> <span class="fl">50</span>, ca <span class="op">=</span> <span class="fl">50</span>, cond <span class="op">=</span> <span class="fl">200</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in define_water(ph = 7.5, alk = 100, temp = 20, na = 50, ca = 50, :</span></span>
<span><span class="co">#&gt; Missing values for magnesium and total hardness but calcium supplied. Default</span></span>
<span><span class="co">#&gt; ratio of 65% Ca2+ and 35% Mg2+ will be used.</span></span>
<span><span class="co"># Input more known ions</span></span>
<span><span class="va">new_water3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_water.html">define_water</a></span><span class="op">(</span>ph <span class="op">=</span> <span class="fl">7.5</span>, alk <span class="op">=</span> <span class="fl">100</span>, temp <span class="op">=</span> <span class="fl">20</span>, na <span class="op">=</span> <span class="fl">50</span>, ca <span class="op">=</span> <span class="fl">50</span>, so4 <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in define_water(ph = 7.5, alk = 100, temp = 20, na = 50, ca = 50, :</span></span>
<span><span class="co">#&gt; Missing values for magnesium and total hardness but calcium supplied. Default</span></span>
<span><span class="co">#&gt; ratio of 65% Ca2+ and 35% Mg2+ will be used.</span></span>
<span></span>
<span><span class="va">new_water1</span><span class="op">@</span><span class="va">is</span></span>
<span><span class="co">#&gt; [1] 0.0025</span></span>
<span><span class="va">new_water2</span><span class="op">@</span><span class="va">is</span></span>
<span><span class="co">#&gt; [1] 0.0032</span></span>
<span><span class="va">new_water3</span><span class="op">@</span><span class="va">is</span></span>
<span><span class="co">#&gt; [1] 0.008009908</span></span></code></pre></div>
<p>There are a couple of other assumptions that
<code>define_water</code> makes to be able to set up the data for
downstream <code>tidywater</code> functions. These include standard
ratios for hardness and DOC.</p>
</div>
<div class="section level3">
<h3 id="hardness">Hardness<a class="anchor" aria-label="anchor" href="#hardness"></a>
</h3>
<p>First, when only you only know the total hardness of the
<code>water</code> (<code>tot_hard</code>), calcium hardness
(<code>ca_hard</code>) is assumed to be 65% of the total, which is about
average for
<a href="https://www.ars.usda.gov/ARSUserFiles/80400525/Articles/NDBC32_WaterMin.pdf" class="external-link">
U.S. drinking water</a>. When only <code>ca_hard</code> is provided,
<code>tot_hard</code> is assumed to be equal to calcium hardness/0.65.
Magnesium hardness (<code>mg_hard</code>) is then calculated as total
hardness - calcium hardness.</p>
<p>Let’s look at this using <code>define_water</code>. We can use
<code>convert_units</code> to get the output in standard units of
hardness. By defining only the total hardness, we see that the
<code>water</code> vector also contains estimates for calcium and
magnesium.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate hardness or calcium hardness</span></span>
<span><span class="va">hard_water</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_water.html">define_water</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">20</span>, <span class="fl">100</span>, tot_hard <span class="op">=</span> <span class="fl">150</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># total hardness in mg/L CaCO3</span></span>
<span><span class="va">hard_water</span><span class="op">@</span><span class="va">tot_hard</span></span>
<span><span class="co">#&gt; [1] 150</span></span>
<span></span>
<span><span class="co"># calcium hardness</span></span>
<span><span class="fu"><a href="../reference/convert_units.html">convert_units</a></span><span class="op">(</span>value <span class="op">=</span> <span class="va">hard_water</span><span class="op">@</span><span class="va">ca</span>, formula <span class="op">=</span> <span class="st">"ca"</span>, startunit <span class="op">=</span> <span class="st">"M"</span>, endunit <span class="op">=</span> <span class="st">"mg/L CaCO3"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 97.5</span></span>
<span></span>
<span><span class="co"># magnesium hardness</span></span>
<span><span class="fu"><a href="../reference/convert_units.html">convert_units</a></span><span class="op">(</span>value <span class="op">=</span> <span class="va">hard_water</span><span class="op">@</span><span class="va">mg</span>, formula <span class="op">=</span> <span class="st">"mg"</span>, startunit <span class="op">=</span> <span class="st">"M"</span>, endunit <span class="op">=</span> <span class="st">"mg/L CaCO3"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 52.5</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="total-and-dissolved-organic-carbon">Total and dissolved organic carbon<a class="anchor" aria-label="anchor" href="#total-and-dissolved-organic-carbon"></a>
</h3>
<p>TOC and DOC inputs operate similarly to hardness. TOC and DOC are
important to know for modelling and predicting various water treatment
processes. If you only know TOC, <code>define_water</code> applies a
standard conversion to estimate DOC, and vice versa. If only
<code>toc</code> is provided, <code>doc</code> is assumed to be 95% of
the TOC. If only <code>doc</code> is provided, <code>toc</code> is
assumed to be DOC/0.95. This ratio would generally be an acceptable
estimate for most drinking water scenarios, but the amount of TOC that
is dissolved in raw waters could vary widely.
<a href="https://doi.org/10.1016/S0022-1694(00)00292-4" class="external-link">Westerhoff and
Anning, 2000</a> reported a range of 10-100% dissolved TOC in 25 surface
waters, so keep in mind that the standard conversion may not be right
for your context.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate TOC and DOC</span></span>
<span><span class="va">toc_water</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_water.html">define_water</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">20</span>, <span class="fl">100</span>, toc <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">toc_water</span><span class="op">@</span><span class="va">toc</span> <span class="co"># mg/L</span></span>
<span><span class="co">#&gt; [1] 3</span></span>
<span><span class="va">toc_water</span><span class="op">@</span><span class="va">doc</span> <span class="co"># mg/L</span></span>
<span><span class="co">#&gt; [1] 2.85</span></span>
<span></span>
<span><span class="va">doc_water</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_water.html">define_water</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">20</span>, <span class="fl">100</span>, doc <span class="op">=</span> <span class="fl">1.3</span><span class="op">)</span></span>
<span><span class="va">doc_water</span><span class="op">@</span><span class="va">toc</span> <span class="co"># mg/L</span></span>
<span><span class="co">#&gt; [1] 1.368421</span></span>
<span><span class="va">doc_water</span><span class="op">@</span><span class="va">doc</span> <span class="co"># mg/L</span></span>
<span><span class="co">#&gt; [1] 1.3</span></span></code></pre></div>
<p>Overall, <code>tidywater</code> helps you model scenarios with as
little information as possible because we often don’t have all the data
we would like, but the less you have to assume about your water, the
better. It’s important to understand and list the assumptions you are
making during any modelling effort.</p>
</div>
</div>
<div class="section level2">
<h2 id="summary-and-recommended-resources">Summary and Recommended Resources<a class="anchor" aria-label="anchor" href="#summary-and-recommended-resources"></a>
</h2>
<p>In this tutorial, we were introduced to the <code>water</code> object
and the water quality parameters specified in it. We added water quality
data using the <code>define_water</code> function, and modified the
water to meet the electroneutrality principle by balancing ions with
<code>balance_ions</code>. The change was also visualized using
<code>plot_ions</code>. The built-in unit conversion function
<code>convert_units</code> was also introduced.</p>
<p>Next, we looked at some assumptions built into the model for ionic
strength, hardness, and TOC/DOC that are able to fill in related water
quality parameters based on accepted practice and empirical research in
order to set up for future tidywater functions. Note that the fewer
assumptions you have about your water, the better the prediction.</p>
<p>Check out our other vignettes to learn more about tidywater’s
functions for modelling softening, coagulation, and DBP formation.
Please note that as many models have been included as possible, however,
users should be aware that models have varying degrees of accuracy and
applicability. To learn more, read the references provided in the
Description file for the models implemented.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sierra Johnson, Libby McKenna, Riley Mulhern, Chris Corwin, Brown and Caldwell.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
