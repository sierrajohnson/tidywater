<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate six corrosion and scaling indices (AI, RI, LSI, LI, CSMR, CCPP) — calculate_corrosion • tidywater</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate six corrosion and scaling indices (AI, RI, LSI, LI, CSMR, CCPP) — calculate_corrosion"><meta name="description" content="This function takes an object created by define_water and calculates
corrosion and scaling indices. For a single water, use calculate_corrosion; to apply the calculations to a
dataframe, use calculate_corrosion_df."><meta property="og:description" content="This function takes an object created by define_water and calculates
corrosion and scaling indices. For a single water, use calculate_corrosion; to apply the calculations to a
dataframe, use calculate_corrosion_df."><meta property="og:image" content="https://BrownandCaldwell-Public.github.io/tidywater/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidywater</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.10.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/tidywater.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/coeff_fitting_chemdose_dbp.html">Fitting and using custom coefficients in chemdose_dbp</a></li>
    <li><a class="dropdown-item" href="../articles/help_functions_blend_waters.html">Blending Multiple Waters</a></li>
    <li><a class="dropdown-item" href="../articles/help_functions_chemdose_ph.html">Helper Functions &amp; Dose Chemicals</a></li>
    <li><a class="dropdown-item" href="../articles/intro.html">Introduction to tidywater: Basic functions</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/BrownandCaldwell-Public/tidywater/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Calculate six corrosion and scaling indices (AI, RI, LSI, LI, CSMR, CCPP)</h1>
      <small class="dont-index">Source: <a href="https://github.com/BrownandCaldwell-Public/tidywater/blob/main/R/calculate_corrosion.R" class="external-link"><code>R/calculate_corrosion.R</code></a></small>
      <div class="d-none name"><code>calculate_corrosion.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function takes an object created by <a href="define_water.html">define_water</a> and calculates
corrosion and scaling indices. For a single water, use <code>calculate_corrosion</code>; to apply the calculations to a
dataframe, use <code>calculate_corrosion_df</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calculate_corrosion</span><span class="op">(</span></span>
<span>  <span class="va">water</span>,</span>
<span>  index <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"aggressive"</span>, <span class="st">"ryznar"</span>, <span class="st">"langelier"</span>, <span class="st">"ccpp"</span>, <span class="st">"larsonskold"</span>, <span class="st">"csmr"</span><span class="op">)</span>,</span>
<span>  form <span class="op">=</span> <span class="st">"calcite"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">calculate_corrosion_df</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  input_water <span class="op">=</span> <span class="st">"defined"</span>,</span>
<span>  water_prefix <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  index <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"aggressive"</span>, <span class="st">"ryznar"</span>, <span class="st">"langelier"</span>, <span class="st">"ccpp"</span>, <span class="st">"larsonskold"</span>, <span class="st">"csmr"</span><span class="op">)</span>,</span>
<span>  form <span class="op">=</span> <span class="st">"calcite"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="source">Source<a class="anchor" aria-label="anchor" href="#source"></a></h2>
    <p>AWWA (1977)</p>
<p>Crittenden et al. (2012)</p>
<p>Langelier (1936)</p>
<p>Larson and Skold (1958)</p>
<p>Merrill and Sanks (1977a)</p>
<p>Merrill and Sanks (1977b)</p>
<p>Merrill and Sanks (1978)</p>
<p>Nguyen et al. (2011)</p>
<p>Plummer and Busenberg (1982)</p>
<p>Ryznar (1944)</p>
<p>Schock (1984)</p>
<p>Trussell (1998)</p>
<p>U.S. EPA (1980)</p>
<p>See reference list at <a href="https://github.com/BrownandCaldwell-Public/tidywater/wiki/References" class="external-link">https://github.com/BrownandCaldwell-Public/tidywater/wiki/References</a></p>
    </div>
    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-water">water<a class="anchor" aria-label="anchor" href="#arg-water"></a></dt>
<dd><p>Source water of class "water" created by <a href="define_water.html">define_water</a></p></dd>


<dt id="arg-index">index<a class="anchor" aria-label="anchor" href="#arg-index"></a></dt>
<dd><p>The indices to be calculated.
Default calculates all six indices: "aggressive", "ryznar", "langelier", "ccpp", "larsonskold", "csmr"
CCPP may not be able to be calculated sometimes, so it may be advantageous to leave this out of the function to avoid errors</p></dd>


<dt id="arg-form">form<a class="anchor" aria-label="anchor" href="#arg-form"></a></dt>
<dd><p>Form of calcium carbonate mineral to use for modelling solubility: "calcite" (default), "aragonite", or "vaterite"</p></dd>


<dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>a data frame containing a water class column, created using <a href="define_water.html">define_water</a></p></dd>


<dt id="arg-input-water">input_water<a class="anchor" aria-label="anchor" href="#arg-input-water"></a></dt>
<dd><p>name of the column of water class data to be used as the input. Default is "defined".</p></dd>


<dt id="arg-water-prefix">water_prefix<a class="anchor" aria-label="anchor" href="#arg-water-prefix"></a></dt>
<dd><p>append water name to beginning of output columns. Defaults to TRUE</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>calculate_corrosion</code> returns a data frame with corrosion and scaling indices as individual columns.</p>
<p><code>calculate_corrosion_df</code> returns the a data frame containing specified corrosion and scaling indices as columns.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Aggressiveness Index (AI), unitless - the corrosive tendency of water and its effect on asbestos cement pipe.</p>
<p>Ryznar Index (RI), unitless - a measure of scaling potential.</p>
<p>Langelier Saturation Index (LSI), unitless - describes the potential for calcium carbonate scale formation.
Equations use empirical calcium carbonate solubilities from Plummer and Busenberg (1982) and Crittenden et al. (2012)
rather than calculated from the concentrations of calcium and carbonate in the water.</p>
<p>Larson-skold Index (LI), unitless - describes the corrosivity towards mild steel.</p>
<p>Chloride-to-sulfate mass ratio (CSMR), mg Cl/mg SO4 - indicator of galvanic corrosion for lead solder pipe joints.</p>
<p>Calcium carbonate precipitation potential (CCPP), mg/L as CaCO3 - a prediction of the mass of calcium carbonate that will precipitate at equilibrium.
A positive CCPP value indicates the amount of CaCO3 (mg/L as CaCO3) that will precipitate.
A negative CCPP indicates how much CaCO3 can be dissolved in the water.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">water</span> <span class="op">&lt;-</span> <span class="fu"><a href="define_water.html">define_water</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  ph <span class="op">=</span> <span class="fl">8</span>, temp <span class="op">=</span> <span class="fl">25</span>, alk <span class="op">=</span> <span class="fl">200</span>, tot_hard <span class="op">=</span> <span class="fl">200</span>,</span></span>
<span class="r-in"><span>  tds <span class="op">=</span> <span class="fl">576</span>, cl <span class="op">=</span> <span class="fl">150</span>, so4 <span class="op">=</span> <span class="fl">200</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Missing values for calcium and magnesium but total hardness supplied. Default ratio of 65% Ca2+ and 35% Mg2+ will be used.</span>
<span class="r-in"><span><span class="va">corrosion_indices</span> <span class="op">&lt;-</span> <span class="fu">calculate_corrosion</span><span class="op">(</span><span class="va">water</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Calcium estimated by previous tidywater function, aggressiveness index calculation approximate.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">water</span> <span class="op">&lt;-</span> <span class="fu"><a href="define_water.html">define_water</a></span><span class="op">(</span>ph <span class="op">=</span> <span class="fl">8</span>, temp <span class="op">=</span> <span class="fl">25</span>, alk <span class="op">=</span> <span class="fl">100</span>, tot_hard <span class="op">=</span> <span class="fl">50</span>, tds <span class="op">=</span> <span class="fl">200</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Missing values for calcium and magnesium but total hardness supplied. Default ratio of 65% Ca2+ and 35% Mg2+ will be used.</span>
<span class="r-in"><span><span class="va">corrosion_indices</span> <span class="op">&lt;-</span> <span class="fu">calculate_corrosion</span><span class="op">(</span><span class="va">water</span>, index <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"aggressive"</span>, <span class="st">"ccpp"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Calcium estimated by previous tidywater function, aggressiveness index calculation approximate.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">example_df</span> <span class="op">&lt;-</span> <span class="va">water_df</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="define_water_df.html">define_water_df</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">calculate_corrosion_df</span><span class="op">(</span>index <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"aggressive"</span>, <span class="st">"ccpp"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sierra Johnson, Libby McKenna, Riley Mulhern, Chris Corwin, Brown and Caldwell.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

